<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Valentine?</title>
  <style>
    :root {
      --bg1: #ffeff3;
      --bg2: #ffe3ec;
      --card: rgba(255, 255, 255, 0.75);
      --text: #1f1f1f;
      --pink: #ff3b7a;
      --pink2: #ff5c90;
      --shadow: 0 20px 60px rgba(0,0,0,.12);
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      min-height: 100vh;
      display: grid;
      place-items: center;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      color: var(--text);
      background:
        radial-gradient(800px 500px at 15% 15%, var(--bg2), transparent 60%),
        radial-gradient(900px 600px at 85% 25%, #ffd6e3, transparent 55%),
        linear-gradient(180deg, var(--bg1), #fff);
      overflow: hidden;
    }

    .card {
      width: min(560px, 92vw);
      padding: 28px 26px 22px;
      border-radius: 22px;
      background: var(--card);
      backdrop-filter: blur(10px);
      box-shadow: var(--shadow);
      border: 1px solid rgba(255,255,255,.6);
      text-align: center;
      position: relative;
    }

    h1 {
      margin: 0 0 6px;
      font-size: clamp(26px, 3.6vw, 34px);
      letter-spacing: -0.02em;
    }

    p {
      margin: 0 0 18px;
      opacity: .8;
      font-size: 15px;
      line-height: 1.35;
    }

    .stage {
      position: relative;
      height: 140px;
      margin-top: 6px;
      border-radius: 18px;
      background: rgba(255,255,255,.55);
      border: 1px dashed rgba(255, 59, 122, .25);
      overflow: hidden;
    }

    .btn {
      border: 0;
      padding: 12px 18px;
      border-radius: 999px;
      font-weight: 700;
      cursor: pointer;
      user-select: none;
      font-size: 16px;
      transition: transform .08s ease, filter .15s ease;
      will-change: transform;
    }

    .btn:active { transform: scale(.98); }

    .yes {
      background: linear-gradient(135deg, var(--pink), var(--pink2));
      color: white;
      box-shadow: 0 10px 28px rgba(255, 59, 122, .35);
    }

    .no {
      position: absolute;
      left: 62%;
      top: 46%;
      transform: translate(-50%, -50%);
      background: rgba(0,0,0,.06);
      color: #222;
      border: 1px solid rgba(0,0,0,.08);
      box-shadow: 0 10px 20px rgba(0,0,0,.08);
    }

    .yes-wrap {
      position: absolute;
      left: 38%;
      top: 46%;
      transform: translate(-50%, -50%);
    }

    .hint {
      margin-top: 14px;
      font-size: 12px;
      opacity: .6;
    }

    .result {
      margin-top: 14px;
      font-size: 16px;
      font-weight: 700;
      min-height: 22px;
    }

    .confetti {
      position: fixed;
      inset: 0;
      pointer-events: none;
      overflow: hidden;
    }

    .piece {
      position: absolute;
      width: 10px;
      height: 14px;
      opacity: .9;
      transform: translateY(-20px) rotate(0deg);
      animation: fall 1200ms linear forwards;
      border-radius: 3px;
    }

    @keyframes fall {
      to { transform: translateY(calc(100vh + 40px)) rotate(520deg); opacity: 1; }
    }
  </style>
</head>
<body>
  <div class="card">
    <h1>Will you be my Valentine?</h1>
    <p>Choose wisely. The ‚ÄúNo‚Äù button has‚Ä¶ commitment issues.</p>

    <div class="stage" id="stage" aria-label="button stage">
      <div class="yes-wrap">
        <button class="btn yes" id="yesBtn">Yes</button>
      </div>
      <button class="btn no" id="noBtn">No</button>
    </div>

    <div class="result" id="result"></div>
    <div class="hint">Tip: try hovering the ‚ÄúNo‚Äù button (or tapping it on mobile).</div>
  </div>

  <div class="confetti" id="confetti"></div>

  <script>
    const stage = document.getElementById("stage");
    const noBtn = document.getElementById("noBtn");
    const yesBtn = document.getElementById("yesBtn");
    const result = document.getElementById("result");
    const confetti = document.getElementById("confetti");

    let dodgeCount = 0;

    function clamp(n, min, max) {
      return Math.max(min, Math.min(max, n));
    }

    function moveNoButton() {
      const stageRect = stage.getBoundingClientRect();
      const btnRect = noBtn.getBoundingClientRect();

      const padding = 10;

      const maxX = stageRect.width - btnRect.width - padding;
      const maxY = stageRect.height - btnRect.height - padding;

      // Random position within the stage
      const x = Math.random() * maxX + padding;
      const y = Math.random() * maxY + padding;

      noBtn.style.left = `${x}px`;
      noBtn.style.top = `${y}px`;
      noBtn.style.transform = `translate(0, 0)`;

      dodgeCount += 1;

      if (dodgeCount === 3) {
        result.textContent = "Noticing a pattern here‚Ä¶";
      } else if (dodgeCount === 6) {
        result.textContent = "The ‚ÄòNo‚Äô button is training for a marathon.";
      } else if (dodgeCount === 10) {
        result.textContent = "Ok, ok. You can just say ‚ÄòYes‚Äô now.";
      }
    }

    // Desktop: flee on hover / mouse move near it
    noBtn.addEventListener("mouseenter", moveNoButton);

    // Mobile: flee on touch start (before click)
    noBtn.addEventListener("touchstart", (e) => {
      e.preventDefault();
      moveNoButton();
    }, { passive: false });

    // If someone somehow clicks it, make it sassier
    noBtn.addEventListener("click", () => {
      moveNoButton();
      result.textContent = "You almost got it. Almost.";
    });

    function popConfetti() {
      const colors = ["#ff3b7a", "#ff5c90", "#ffd1dc", "#ffb3c6", "#ffffff"];
      const pieces = 80;

      for (let i = 0; i < pieces; i++) {
        const d = document.createElement("div");
        d.className = "piece";
        d.style.left = `${Math.random() * 100}vw`;
        d.style.top = `${-20 - Math.random() * 40}px`;
        d.style.background = colors[Math.floor(Math.random() * colors.length)];
        d.style.animationDuration = `${900 + Math.random() * 900}ms`;
        d.style.transform = `translateY(-20px) rotate(${Math.random() * 180}deg)`;
        d.style.width = `${8 + Math.random() * 10}px`;
        d.style.height = `${10 + Math.random() * 14}px`;

        confetti.appendChild(d);
        d.addEventListener("animationend", () => d.remove());
      }
    }

    yesBtn.addEventListener("click", () => {
      result.textContent = "Correct answer. I knew you had taste. üíò";
      popConfetti();

      // Lock buttons after yes
      noBtn.disabled = true;
      yesBtn.disabled = true;
      noBtn.style.filter = "grayscale(1)";
      yesBtn.style.filter = "brightness(1.05)";
    });

    // Initialize to absolute px positions so movement works consistently
    // Convert the initial % positioning to px once after layout
    window.addEventListener("load", () => {
      const stageRect = stage.getBoundingClientRect();
      const btnRect = noBtn.getBoundingClientRect();

      const startX = stageRect.width * 0.62 - btnRect.width / 2;
      const startY = stageRect.height * 0.46 - btnRect.height / 2;

      noBtn.style.left = `${clamp(startX, 10, stageRect.width - btnRect.width - 10)}px`;
      noBtn.style.top = `${clamp(startY, 10, stageRect.height - btnRect.height - 10)}px`;
      noBtn.style.transform = "translate(0,0)";
    });
  </script>
</body>
</html>
